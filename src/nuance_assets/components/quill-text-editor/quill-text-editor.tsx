import 'react-quill/dist/quill.snow.css';
import 'highlight.js/styles/github-dark-dimmed.css';
import React from 'react';
import ReactQuill, { Quill } from 'react-quill';
import ImageCompress from './modules/quill-image-compress/quill.imageCompressor.js';
import ImageResize from './modules/quill-image-resize/quill-image-resize.js';
import hljs from 'highlight.js';

//Includes ImageDrop module
Quill.register('modules/imageCompress', ImageCompress);
Quill.register('modules/imageResize', ImageResize);

type TextEditorProps = {
  onChange?: (html: string, text: string, isEmpty: boolean) => void;
  value: string;
  hasError: boolean;
  dark?: boolean;
};

//var icons = ReactQuill.Quill.import('ui/icons');
//icons['italic'] =
//  '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.27189 13.9438L4.29466 14C4.17224 14 4.09253 13.9755 4.05552 13.9266C4.01851 13.8805 4 13.7898 4 13.6544C4 13.5191 4.02278 13.437 4.06833 13.4082C4.11673 13.3765 4.21637 13.3607 4.36726 13.3607H5.37936C5.4847 13.0382 5.76797 11.3146 6.22918 8.19006C6.69039 5.06263 6.921 3.35637 6.921 3.07127C6.921 2.7833 6.88541 2.63931 6.81423 2.63931H5.64413C5.479 2.63931 5.39644 2.55148 5.39644 2.37581C5.39644 2.20014 5.42206 2.09359 5.47331 2.05616C5.52456 2.01872 5.61566 2 5.74662 2C5.74662 2 6.42847 2.01872 7.79217 2.05616L9.70107 2C9.82349 2 9.9032 2.02448 9.94021 2.07343C9.98007 2.12239 10 2.21454 10 2.34989C10 2.48524 9.9758 2.56731 9.9274 2.59611C9.88185 2.62491 9.78363 2.63931 9.63274 2.63931H8.65053C8.52527 2.91289 8.24342 4.60763 7.80498 7.72354C7.36655 10.8366 7.14733 12.6566 7.14733 13.1836C7.14733 13.3017 7.1758 13.3607 7.23274 13.3607H8.39004C8.48968 13.3607 8.55516 13.3808 8.58648 13.4212C8.61779 13.4615 8.63345 13.5436 8.63345 13.6674C8.63345 13.7912 8.61779 13.8776 8.58648 13.9266C8.55516 13.9755 8.48968 14 8.39004 14L6.27189 13.9438Z" fill="black"/></svg>';
//icons['bold'] =
//  '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 14V2H7.24214C8.71164 2 9.82625 2.28022 10.586 2.84066C11.3457 3.3956 11.7255 4.21154 11.7255 5.28846C11.7255 5.87637 11.573 6.3956 11.268 6.84615C10.963 7.29121 10.5388 7.61813 9.99538 7.82692C10.6165 7.98077 11.1044 8.29121 11.4593 8.75824C11.8198 9.22528 12 9.7967 12 10.4725C12 11.6264 11.6285 12.5 10.8854 13.0934C10.1423 13.6868 9.08318 13.989 7.70795 14H3ZM5.49538 8.77473V12.0137H7.63309C8.22089 12.0137 8.67837 11.8764 9.00555 11.6016C9.33826 11.3214 9.50462 10.9368 9.50462 10.4478C9.50462 9.3489 8.93068 8.79121 7.78281 8.77473H5.49538ZM5.49538 7.02747H7.34196C8.60074 7.00549 9.23013 6.50824 9.23013 5.53571C9.23013 4.99176 9.06932 4.60165 8.74769 4.36538C8.43161 4.12363 7.92976 4.00275 7.24214 4.00275H5.49538V7.02747Z" fill="black"/></svg>';
// icons['list'] =
//   '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.875 1.9375C1.35723 1.9375 0.9375 2.35723 0.9375 2.875C0.9375 3.39277 1.35723 3.8125 1.875 3.8125C2.39277 3.8125 2.8125 3.39277 2.8125 2.875C2.8125 2.35723 2.39277 1.9375 1.875 1.9375ZM0 2.875C0 1.83947 0.839466 1 1.875 1C2.91053 1 3.75 1.83947 3.75 2.875C3.75 3.91053 2.91053 4.75 1.875 4.75C0.839466 4.75 0 3.91053 0 2.875ZM4.6875 2.875C4.6875 2.61612 4.89737 2.40625 5.15625 2.40625H14.5312C14.7901 2.40625 15 2.61612 15 2.875C15 3.13388 14.7901 3.34375 14.5312 3.34375H5.15625C4.89737 3.34375 4.6875 3.13388 4.6875 2.875ZM1.875 7.5625C1.35723 7.5625 0.9375 7.98223 0.9375 8.5C0.9375 9.01777 1.35723 9.4375 1.875 9.4375C2.39277 9.4375 2.8125 9.01777 2.8125 8.5C2.8125 7.98223 2.39277 7.5625 1.875 7.5625ZM0 8.5C0 7.46447 0.839466 6.625 1.875 6.625C2.91053 6.625 3.75 7.46447 3.75 8.5C3.75 9.53553 2.91053 10.375 1.875 10.375C0.839466 10.375 0 9.53553 0 8.5ZM4.6875 8.5C4.6875 8.24112 4.89737 8.03125 5.15625 8.03125H14.5312C14.7901 8.03125 15 8.24112 15 8.5C15 8.75888 14.7901 8.96875 14.5312 8.96875H5.15625C4.89737 8.96875 4.6875 8.75888 4.6875 8.5ZM1.875 13.1875C1.35723 13.1875 0.9375 13.6072 0.9375 14.125C0.9375 14.6428 1.35723 15.0625 1.875 15.0625C2.39277 15.0625 2.8125 14.6428 2.8125 14.125C2.8125 13.6072 2.39277 13.1875 1.875 13.1875ZM0 14.125C0 13.0895 0.839466 12.25 1.875 12.25C2.91053 12.25 3.75 13.0895 3.75 14.125C3.75 15.1605 2.91053 16 1.875 16C0.839466 16 0 15.1605 0 14.125ZM4.6875 14.125C4.6875 13.8661 4.89737 13.6562 5.15625 13.6562H14.5312C14.7901 13.6562 15 13.8661 15 14.125C15 14.3839 14.7901 14.5938 14.5312 14.5938H5.15625C4.89737 14.5938 4.6875 14.3839 4.6875 14.125Z" fill="black"/></svg>';
// icons['list'] =
//   '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.6875 2.875C4.6875 2.61612 4.89737 2.40625 5.15625 2.40625H14.5312C14.7901 2.40625 15 2.61612 15 2.875C15 3.13388 14.7901 3.34375 14.5312 3.34375H5.15625C4.89737 3.34375 4.6875 3.13388 4.6875 2.875ZM4.6875 8.5C4.6875 8.24112 4.89737 8.03125 5.15625 8.03125H14.5312C14.7901 8.03125 15 8.24112 15 8.5C15 8.75888 14.7901 8.96875 14.5312 8.96875H5.15625C4.89737 8.96875 4.6875 8.75888 4.6875 8.5ZM4.6875 14.125C4.6875 13.8661 4.89737 13.6562 5.15625 13.6562H14.5312C14.7901 13.6562 15 13.8661 15 14.125C15 14.3839 14.7901 14.5938 14.5312 14.5938H5.15625C4.89737 14.5938 4.6875 14.3839 4.6875 14.125Z" fill="black"/><path d="M1.87012 3.97998H2.26562C2.37467 3.97998 2.45361 4.00033 2.50244 4.04102C2.55127 4.08171 2.57568 4.14844 2.57568 4.24121C2.57568 4.33236 2.55208 4.39827 2.50488 4.43896C2.45768 4.47966 2.37793 4.5 2.26562 4.5H0.825195C0.712891 4.5 0.633138 4.47966 0.585938 4.43896C0.538737 4.39827 0.515137 4.33236 0.515137 4.24121C0.515137 4.14844 0.538737 4.08171 0.585938 4.04102C0.634766 4.00033 0.714518 3.97998 0.825195 3.97998H1.2793V1.91943L1.00586 1.99023C0.963542 2 0.928548 2.00732 0.900879 2.01221C0.87321 2.01709 0.852865 2.01953 0.839844 2.01953C0.773112 2.01953 0.721029 1.99837 0.683594 1.95605C0.647786 1.91374 0.629883 1.85352 0.629883 1.77539C0.629883 1.71842 0.650228 1.67041 0.690918 1.63135C0.731608 1.59229 0.794271 1.56217 0.878906 1.54102L1.48438 1.375C1.53483 1.36198 1.57633 1.35221 1.60889 1.3457C1.64144 1.33919 1.66829 1.33594 1.68945 1.33594C1.75456 1.33594 1.80094 1.35384 1.82861 1.38965C1.85628 1.42546 1.87012 1.48568 1.87012 1.57031V3.97998Z" fill="black"/><path d="M1.17432 9.45068H2.02881V9.43604C2.02881 9.35303 2.05078 9.29118 2.09473 9.25049C2.1403 9.2098 2.20703 9.18945 2.29492 9.18945C2.36654 9.18945 2.42188 9.2098 2.46094 9.25049C2.5 9.28955 2.51953 9.3457 2.51953 9.41895V9.45068L2.5 9.8291C2.49674 9.90397 2.48454 9.95117 2.46338 9.9707C2.44385 9.99023 2.40804 10 2.35596 10H0.600586C0.506185 10 0.432943 9.97966 0.380859 9.93896C0.330404 9.89827 0.305176 9.8405 0.305176 9.76562C0.305176 9.70378 0.320638 9.64355 0.351562 9.58496C0.384115 9.52474 0.435384 9.46126 0.505371 9.39453L1.49902 8.43506C1.60645 8.33089 1.6862 8.22673 1.73828 8.12256C1.79199 8.01839 1.81885 7.91423 1.81885 7.81006C1.81885 7.66357 1.78304 7.55452 1.71143 7.48291C1.64144 7.4113 1.53402 7.37549 1.38916 7.37549C1.30452 7.37549 1.22884 7.38851 1.16211 7.41455C1.09701 7.43896 1.04655 7.47396 1.01074 7.51953C0.991211 7.54232 0.967611 7.57731 0.939941 7.62451C0.861816 7.75146 0.775553 7.81494 0.681152 7.81494C0.599772 7.81494 0.537923 7.78809 0.495605 7.73438C0.454915 7.68066 0.43457 7.60091 0.43457 7.49512C0.43457 7.38607 0.447591 7.30469 0.473633 7.25098C0.499674 7.19727 0.551758 7.14355 0.629883 7.08984C0.756836 7.00521 0.890299 6.94255 1.03027 6.90186C1.17188 6.86117 1.32487 6.84082 1.48926 6.84082C1.79688 6.84082 2.0402 6.92383 2.21924 7.08984C2.3999 7.25586 2.49023 7.47884 2.49023 7.75879C2.49023 7.94596 2.44303 8.12581 2.34863 8.29834C2.25586 8.46924 2.111 8.64014 1.91406 8.81104L1.17432 9.45068Z" fill="black"/><path d="M1.9458 13.7397C2.13298 13.7983 2.27214 13.8911 2.36328 14.0181C2.45443 14.1434 2.5 14.307 2.5 14.5088C2.5 14.8132 2.39665 15.0549 2.18994 15.2339C1.98486 15.4113 1.70492 15.5 1.3501 15.5C1.06364 15.5 0.826823 15.4528 0.639648 15.3584C0.452474 15.264 0.358887 15.1493 0.358887 15.0142C0.358887 14.9344 0.384115 14.8701 0.43457 14.8213C0.486654 14.7708 0.555013 14.7456 0.639648 14.7456C0.680339 14.7456 0.783691 14.7822 0.949707 14.8555C1.11572 14.9287 1.26221 14.9653 1.38916 14.9653C1.54215 14.9653 1.65934 14.9246 1.74072 14.8433C1.82373 14.7603 1.86523 14.6423 1.86523 14.4893C1.86523 14.3249 1.83024 14.2077 1.76025 14.1377C1.69189 14.0677 1.56006 14.0286 1.36475 14.0205C1.26221 14.0173 1.19303 13.9977 1.15723 13.9619C1.12305 13.9245 1.10596 13.8586 1.10596 13.7642C1.10596 13.634 1.17594 13.5591 1.31592 13.5396C1.33545 13.5379 1.3501 13.5363 1.35986 13.5347C1.53564 13.5103 1.64958 13.4688 1.70166 13.4102C1.75374 13.3499 1.77979 13.2531 1.77979 13.1196C1.77979 13.0041 1.74805 12.9146 1.68457 12.8511C1.62272 12.786 1.53483 12.7534 1.4209 12.7534C1.30046 12.7534 1.16536 12.7917 1.01562 12.8682C0.865885 12.943 0.762533 12.9805 0.705566 12.9805C0.64209 12.9805 0.59082 12.9601 0.551758 12.9194C0.514323 12.8771 0.495605 12.8242 0.495605 12.7607C0.495605 12.6224 0.591634 12.5036 0.783691 12.4043C0.975749 12.305 1.21257 12.2554 1.49414 12.2554C1.77734 12.2554 2.00277 12.3286 2.17041 12.4751C2.33968 12.6216 2.42432 12.8161 2.42432 13.0586C2.42432 13.2181 2.38525 13.3532 2.30713 13.4639C2.23063 13.5729 2.11019 13.6649 1.9458 13.7397Z" fill="black"/></svg>';
//icons['link'] =
//  '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.52484 6.42458C6.91739 6.14126 6.22252 6.10974 5.59189 6.33692C4.96115 6.56414 4.44593 7.03169 4.15874 7.63746L3.23834 9.59347C2.95487 10.2011 2.92299 10.8968 3.1502 11.5277C3.37734 12.1583 3.84463 12.6735 4.45012 12.9608C5.05758 13.244 5.7524 13.2755 6.383 13.0484C7.01407 12.8211 7.52953 12.3533 7.81679 11.7471C7.93506 11.4976 8.23322 11.3912 8.48275 11.5095C8.73229 11.6277 8.83871 11.9259 8.72044 12.1754C8.32002 13.0203 7.60151 13.6724 6.72187 13.9892C5.84223 14.306 4.87295 14.2619 4.02577 13.8663L4.23729 13.4133L4.02315 13.8651C3.17827 13.4647 2.5262 12.7462 2.20937 11.8665C1.89254 10.9869 1.93671 10.0176 2.33223 9.17044L2.33287 9.16907L3.25476 7.20987C3.65504 6.36503 4.37343 5.71295 5.25297 5.3961C6.13252 5.07926 7.10171 5.1234 7.94881 5.5189L7.73728 5.97196L7.95062 5.51975C8.44568 5.7533 8.87961 6.09882 9.21811 6.52899C9.55662 6.95916 9.7904 7.46218 9.90098 7.99828C9.95676 8.26873 9.78274 8.5332 9.51229 8.58898C9.24184 8.64476 8.97738 8.47074 8.92159 8.20029C8.84235 7.81612 8.67482 7.45565 8.43225 7.14739C8.18988 6.83938 7.87924 6.59194 7.52484 6.42458Z" fill="#19192E"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.5478 3.03772C10.9403 2.75455 10.2455 2.72308 9.6149 2.95021C8.98384 3.1775 8.46837 3.6453 8.18111 4.25142C8.06284 4.50096 7.76468 4.60738 7.51515 4.48911C7.26561 4.37085 7.1592 4.07269 7.27746 3.82315C7.67788 2.97827 8.39639 2.3262 9.27603 2.00937C10.1557 1.69255 11.125 1.73671 11.9721 2.13223L11.9748 2.13347C12.8195 2.5339 13.4714 3.25228 13.7882 4.13174C14.105 5.01119 14.061 5.98028 13.6657 6.82738L13.665 6.82884L12.7437 8.78684L12.7431 8.78809C12.3427 9.63297 11.6242 10.285 10.7445 10.6019C9.8649 10.9187 8.89562 10.8745 8.04844 10.479L8.25997 10.0259L8.04685 10.4783C7.62194 10.2781 7.24138 9.99492 6.92754 9.64545C6.61371 9.29599 6.37294 8.88728 6.21941 8.44338C6.12915 8.18241 6.26755 7.89768 6.52852 7.80742C6.78949 7.71716 7.07423 7.85555 7.16449 8.11652C7.27442 8.43439 7.44683 8.72705 7.67156 8.97729C7.8961 9.22732 8.16835 9.42996 8.47231 9.57329C9.07988 9.85667 9.7749 9.88822 10.4057 9.66103C11.0365 9.43381 11.5519 8.96621 11.8392 8.36035L12.7595 6.40453C13.0428 5.79699 13.0746 5.10133 12.8474 4.47065C12.6203 3.84018 12.1531 3.3251 11.5478 3.03772Z" fill="#19192E"/></svg>';
//icons['image'] =
// '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.618 2C7.33944 1.99994 7.06637 2.07746 6.82938 2.22385ZM7.61785 3C7.52498 2.99997 7.43394 3.02581 7.35493 3.07462C7.27592 3.12342 7.21206 3.19327 7.17052 3.27633L6.44725 4.72352C6.36258 4.89296 6.18942 5 6 5H1.5C1.36739 5 1.24021 5.05268 1.14645 5.14645C1.05268 5.24021 1 5.36739 1 5.5V13.5C1 13.6326 1.05268 13.7598 1.14645 13.8536C1.24022 13.9473 1.36739 14 1.5 14H14.5C14.6326 14 14.7598 13.9473 14.8536 13.8536C14.9473 13.7598 15 13.6326 15 13.5V5.5C15 5.36739 14.9473 5.24021 14.8536 5.14645C14.7598 5.05268 14.6326 5 14.5 5H13C12.8106 5 12.6374 4.89296 12.5527 4.72352L11.8295 3.27633C11.7879 3.19334 11.724 3.1234 11.6451 3.07462C11.5661 3.02581 11.475 2.99997 11.3821 3H7.61785ZM6 4H4V3.5C4 3.22386 3.77614 3 3.5 3C3.22386 3 3 3.22386 3 3.5V4H1.5C1.10218 4 0.720644 4.15804 0.43934 4.43934C0.158035 4.72064 0 5.10218 0 5.5V13.5C0 13.8978 0.158035 14.2794 0.43934 14.5607C0.720644 14.842 1.10217 15 1.5 15H14.5C14.8978 15 15.2794 14.842 15.5607 14.5607C15.842 14.2794 16 13.8978 16 13.5V5.5C16 5.10217 15.842 4.72064 15.5607 4.43934C15.2794 4.15804 14.8978 4 14.5 4H13.3091L12.7239 2.82914C12.5993 2.57996 12.4077 2.37028 12.1706 2.22385C11.9336 2.07746 11.6606 1.99994 11.382 2H7.618M6 4H5.69092L6.27608 2.82914C6.40071 2.57996 6.59235 2.37028 6.82938 2.22385M7.96927 5.30448C8.45457 5.10346 8.97471 5 9.5 5C10.0253 5 10.5454 5.10346 11.0307 5.30448C11.516 5.5055 11.957 5.80014 12.3284 6.17157C12.6999 6.54301 12.9945 6.98396 13.1955 7.46927C13.3965 7.95457 13.5 8.47471 13.5 9C13.5 9.52529 13.3965 10.0454 13.1955 10.5307C12.9945 11.016 12.6999 11.457 12.3284 11.8284C11.957 12.1999 11.516 12.4945 11.0307 12.6955C10.5454 12.8965 10.0253 13 9.5 13C8.97471 13 8.45457 12.8965 7.96927 12.6955C7.48396 12.4945 7.04301 12.1999 6.67157 11.8284C6.30014 11.457 6.0055 11.016 5.80448 10.5307C5.60346 10.0454 5.5 9.52529 5.5 9C5.5 8.47471 5.60346 7.95457 5.80448 7.46927C6.0055 6.98396 6.30014 6.54301 6.67157 6.17157C7.04301 5.80014 7.48396 5.5055 7.96927 5.30448ZM9.5 6C9.10603 6 8.71593 6.0776 8.35195 6.22836C7.98797 6.37913 7.65725 6.6001 7.37868 6.87868C7.1001 7.15725 6.87913 7.48797 6.72836 7.85195C6.5776 8.21593 6.5 8.60603 6.5 9C6.5 9.39397 6.5776 9.78407 6.72836 10.1481C6.87913 10.512 7.1001 10.8427 7.37868 11.1213C7.65726 11.3999 7.98797 11.6209 8.35195 11.7716C8.71593 11.9224 9.10603 12 9.5 12C9.89397 12 10.2841 11.9224 10.6481 11.7716C11.012 11.6209 11.3427 11.3999 11.6213 11.1213C11.8999 10.8427 12.1209 10.512 12.2716 10.1481C12.4224 9.78407 12.5 9.39397 12.5 9C12.5 8.60603 12.4224 8.21593 12.2716 7.85195C12.1209 7.48797 11.8999 7.15726 11.6213 6.87868C11.3427 6.6001 11.012 6.37913 10.6481 6.22836C10.2841 6.0776 9.89397 6 9.5 6ZM2.79877 6.9952C2.84691 6.98562 2.89156 6.962 2.92678 6.92678C2.962 6.89156 2.98562 6.84691 2.9952 6.79877C2.99837 6.78283 3 6.7665 3 6.75C3 6.71701 2.99347 6.68451 2.98097 6.65433C2.97473 6.63927 2.96701 6.62479 2.95787 6.61111C2.93954 6.58368 2.91606 6.56028 2.88889 6.54213C2.87534 6.53308 2.86087 6.52533 2.84567 6.51903C2.81519 6.5064 2.78267 6.5 2.75 6.5C2.7337 6.5 2.71737 6.50159 2.70123 6.5048C2.65274 6.51445 2.60819 6.53826 2.57322 6.57322C2.53826 6.60819 2.51445 6.65273 2.5048 6.70123C2.50159 6.71737 2.5 6.7337 2.5 6.75C2.5 6.78267 2.50641 6.81519 2.51903 6.84567C2.52533 6.86087 2.53308 6.87534 2.54213 6.88889C2.56028 6.91606 2.58368 6.93954 2.61111 6.95787C2.62479 6.96701 2.63927 6.97473 2.65433 6.98097C2.68451 6.99347 2.71701 7 2.75 7C2.7665 7 2.78283 6.99837 2.79877 6.9952ZM2.21967 6.21967C2.36032 6.07902 2.55109 6 2.75 6C2.89834 6 3.04334 6.04399 3.16668 6.1264C3.29001 6.20881 3.38614 6.32594 3.44291 6.46299C3.49967 6.60003 3.51453 6.75083 3.48559 6.89632C3.45665 7.0418 3.38522 7.17544 3.28033 7.28033C3.17544 7.38522 3.0418 7.45665 2.89632 7.48559C2.75084 7.51453 2.60004 7.49968 2.46299 7.44291C2.32594 7.38614 2.20881 7.29001 2.1264 7.16668C2.04399 7.04334 2 6.89834 2 6.75C2 6.55109 2.07902 6.36032 2.21967 6.21967Z" fill="black"/></svg>';
//icons['blockquote'] =
// '<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_756_664)"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 1C1.36739 1 1.24021 1.05268 1.14645 1.14645C1.05268 1.24021 1 1.36739 1 1.5V11.5C1 11.6326 1.05268 11.7598 1.14645 11.8536C1.24022 11.9473 1.36739 12 1.5 12H3.5C3.77614 12 4 12.2239 4 12.5V14.5L7.2 12.1C7.28655 12.0351 7.39181 12 7.5 12H14.5C14.6326 12 14.7598 11.9473 14.8536 11.8536C14.9473 11.7598 15 11.6326 15 11.5V1.5C15 1.36739 14.9473 1.24022 14.8536 1.14645C14.7598 1.05268 14.6326 1 14.5 1H1.5ZM0.43934 0.43934C0.720644 0.158035 1.10218 0 1.5 0H14.5C14.8978 0 15.2794 0.158035 15.5607 0.43934C15.842 0.720644 16 1.10217 16 1.5V11.5C16 11.8978 15.842 12.2794 15.5607 12.5607C15.2794 12.842 14.8978 13 14.5 13H7.66667L3.8 15.9C3.64849 16.0136 3.44579 16.0319 3.27639 15.9472C3.107 15.8625 3 15.6894 3 15.5V13H1.5C1.10217 13 0.720644 12.842 0.43934 12.5607C0.158035 12.2794 0 11.8978 0 11.5V1.5C0 1.10218 0.158035 0.720644 0.43934 0.43934ZM6.00654 4.49987L6.00654 4.50004C6.05394 4.50066 6.10095 4.50462 6.14727 4.51179C6.7167 4.57811 7.11263 4.92136 7.35135 5.31959C7.58696 5.71264 7.68667 6.18023 7.68667 6.58667C7.68667 6.59592 7.68641 6.60517 7.6859 6.61441C7.66209 7.04285 7.52192 7.45669 7.28047 7.81141C7.03902 8.16613 6.70542 8.44832 6.31557 8.6276C6.06469 8.74298 5.76778 8.63313 5.6524 8.38224C5.53702 8.13136 5.64687 7.83444 5.89776 7.71907C6.12242 7.61575 6.31466 7.45314 6.4538 7.24872C6.59036 7.0481 6.67069 6.81467 6.6866 6.57268C6.68564 6.46796 6.67392 6.35995 6.65196 6.25472C6.47306 6.40949 6.24462 6.49684 6.00654 6.49996L5.99346 6.50013L5.99346 6.49996C5.73106 6.49653 5.48037 6.39076 5.2948 6.2052C5.10924 6.01963 5.00347 5.76894 5.00004 5.50654L4.99987 5.49346L5.00004 5.49346C5.00347 5.23106 5.10924 4.98037 5.2948 4.7948C5.48037 4.60924 5.73106 4.50347 5.99346 4.50004L6.00654 4.49987ZM9.50654 4.49987L9.50654 4.50004C9.57557 4.50095 9.6438 4.50893 9.71024 4.52359C10.2354 4.61209 10.6044 4.941 10.8314 5.31959C11.067 5.71264 11.1667 6.18023 11.1667 6.58667C11.1667 6.59506 11.1665 6.60345 11.166 6.61183C11.1446 7.03758 11.0082 7.44957 10.7714 7.80404C10.5346 8.15851 10.2062 8.44221 9.82109 8.62502C9.57162 8.74344 9.2734 8.63722 9.15498 8.38775C9.03656 8.13829 9.14279 7.84006 9.39225 7.72164C9.61417 7.61629 9.80342 7.4528 9.93988 7.24853C10.074 7.04773 10.1523 6.8149 10.1666 6.57399C10.1658 6.47364 10.1551 6.37024 10.1349 6.26915C9.95865 6.41491 9.73712 6.49694 9.50654 6.49996L9.49346 6.50013L9.49346 6.49996C9.23106 6.49653 8.98037 6.39076 8.7948 6.2052C8.60924 6.01963 8.50347 5.76894 8.50004 5.50654L8.49987 5.49346L8.50004 5.49346C8.50347 5.23106 8.60924 4.98037 8.7948 4.7948C8.98037 4.60924 9.23106 4.50347 9.49346 4.50004L9.50654 4.49987Z" fill="black"/></g><defs><clipPath id="clip0_756_664"><rect width="16" height="16" fill="white"/></clipPath></defs></svg>';
//icons['header'] =
// '<svg width="79" height="24" viewBox="0 0 79 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.1797 17H8.20312L3.13281 8.92969V17H1.15625V5.625H3.13281L8.21875 13.7266V5.625H10.1797V17ZM11.9766 12.6953C11.9766 11.8672 12.1406 11.1224 12.4688 10.4609C12.7969 9.79427 13.2578 9.28385 13.8516 8.92969C14.4453 8.57031 15.1276 8.39062 15.8984 8.39062C17.0391 8.39062 17.9635 8.75781 18.6719 9.49219C19.3854 10.2266 19.7708 11.2005 19.8281 12.4141L19.8359 12.8594C19.8359 13.6927 19.6745 14.4375 19.3516 15.0938C19.0339 15.75 18.5755 16.2578 17.9766 16.6172C17.3828 16.9766 16.6953 17.1562 15.9141 17.1562C14.7214 17.1562 13.7656 16.7604 13.0469 15.9688C12.3333 15.1719 11.9766 14.112 11.9766 12.7891V12.6953ZM13.875 12.8594C13.875 13.7292 14.0547 14.4115 14.4141 14.9062C14.7734 15.3958 15.2734 15.6406 15.9141 15.6406C16.5547 15.6406 17.0521 15.3906 17.4062 14.8906C17.7656 14.3906 17.9453 13.6589 17.9453 12.6953C17.9453 11.8411 17.7604 11.1641 17.3906 10.6641C17.026 10.1641 16.5286 9.91406 15.8984 9.91406C15.2786 9.91406 14.7865 10.1615 14.4219 10.6562C14.0573 11.1458 13.875 11.8802 13.875 12.8594ZM25.8672 10.2812C25.6172 10.2396 25.3594 10.2188 25.0938 10.2188C24.224 10.2188 23.638 10.5521 23.3359 11.2188V17H21.4375V8.54688H23.25L23.2969 9.49219C23.7552 8.75781 24.3906 8.39062 25.2031 8.39062C25.474 8.39062 25.6979 8.42708 25.875 8.5L25.8672 10.2812ZM28.8516 8.54688L28.9062 9.42969C29.5 8.73698 30.3125 8.39062 31.3438 8.39062C32.474 8.39062 33.2474 8.82292 33.6641 9.6875C34.2786 8.82292 35.1432 8.39062 36.2578 8.39062C37.1901 8.39062 37.8828 8.64844 38.3359 9.16406C38.7943 9.67969 39.0286 10.4401 39.0391 11.4453V17H37.1406V11.5C37.1406 10.9635 37.0234 10.5703 36.7891 10.3203C36.5547 10.0703 36.1667 9.94531 35.625 9.94531C35.1927 9.94531 34.8385 10.0625 34.5625 10.2969C34.2917 10.526 34.1016 10.8281 33.9922 11.2031L34 17H32.1016V11.4375C32.0755 10.4427 31.5677 9.94531 30.5781 9.94531C29.8177 9.94531 29.2786 10.2552 28.9609 10.875V17H27.0625V8.54688H28.8516ZM46.0391 17C45.9557 16.8385 45.8828 16.5755 45.8203 16.2109C45.2161 16.8411 44.4766 17.1562 43.6016 17.1562C42.7526 17.1562 42.0599 16.9141 41.5234 16.4297C40.987 15.9453 40.7188 15.3464 40.7188 14.6328C40.7188 13.7318 41.0521 13.0417 41.7188 12.5625C42.3906 12.0781 43.349 11.8359 44.5938 11.8359H45.7578V11.2812C45.7578 10.8438 45.6354 10.4948 45.3906 10.2344C45.1458 9.96875 44.7734 9.83594 44.2734 9.83594C43.8411 9.83594 43.487 9.94531 43.2109 10.1641C42.9349 10.3776 42.7969 10.651 42.7969 10.9844H40.8984C40.8984 10.5208 41.0521 10.0885 41.3594 9.6875C41.6667 9.28125 42.0833 8.96354 42.6094 8.73438C43.1406 8.50521 43.7318 8.39062 44.3828 8.39062C45.3724 8.39062 46.1615 8.64062 46.75 9.14062C47.3385 9.63542 47.6406 10.3333 47.6562 11.2344V15.0469C47.6562 15.8073 47.763 16.4141 47.9766 16.8672V17H46.0391ZM43.9531 15.6328C44.3281 15.6328 44.6797 15.5417 45.0078 15.3594C45.3411 15.1771 45.5911 14.9323 45.7578 14.625V13.0312H44.7344C44.0312 13.0312 43.5026 13.1536 43.1484 13.3984C42.7943 13.6432 42.6172 13.9896 42.6172 14.4375C42.6172 14.8021 42.737 15.0938 42.9766 15.3125C43.2214 15.526 43.5469 15.6328 43.9531 15.6328ZM51.6641 17H49.7656V5H51.6641V17Z" fill="black"/><path d="M75 6L78.4641 9.75H71.5359L75 6Z" fill="black"/><path d="M75 17L71.5359 13.25L78.4641 13.25L75 17Z" fill="black"/></svg>';

hljs.configure({
  languages: ['javascript', 'ruby', 'python', 'rust'],
});

const modules = {
  toolbar: [
    [{ header: [1, 2, 3, 4, 5, 6, false] }],
    ['bold', 'italic'],
    [{ list: 'bullet' }, { list: 'ordered' }],
    ['link', 'image'],
    ['blockquote'],
    ['code-block'],
  ],

  syntax: {
    highlight: (text: string) => hljs.highlightAuto(text).value,
  },

  imageResize: {
    modules: ['Resize', 'DisplaySize'],
  },

  imageCompress: {
    quality: 0.9,
    maxWidth: 1000, // default
    maxHeight: 1000, // default
    imageType: 'image/jpeg', // default
    debug: true, // default
    suppressErrorLogging: false, // default
  },
};

const QuillTextEditor: React.FC<TextEditorProps> = (props) => {
  const formats = [
    'code-block',
    'header',
    'bold',
    'italic',
    'blockquote',
    'list',
    'bullet',
    'link',
    'image',
    'width',
    'height',
    'style',
    'class',
    'alt',
  ];

  const onChangeHandler = (html: any, delta: any, source: any, editor: any) => {
    const text = editor.getText(html).trim();
    const isEmpty = text.length === 0;
    props.onChange && props.onChange(html, text, isEmpty);
  };

  const className = props.hasError
    ? props.dark
      ? 'has-error text-editor-dark'
      : 'has-editor'
    : props.dark
      ? 'text-editor-dark'
      : 'text-editor';

  return (
    <div className={className}>
      <ReactQuill
        modules={modules}
        formats={formats}
        placeholder='Body...'
        onChange={onChangeHandler}
        value={props.value}
      ></ReactQuill>
    </div>
  );
};

export default QuillTextEditor;
